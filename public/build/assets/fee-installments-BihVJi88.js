import{r as h,v as B,j as e,$ as V,m as z}from"./app-C1hgEOo7.js";import{A as U,C as R,a as K,b as G,c as J,d as Q,T as W,e as X,f as A,g as i,h as Z,i as c}from"./app-DwIirEcu.js";import{B as o}from"./button-CDfH7Em9.js";import{D,a as ee,b as _,c as y,d as f,e as C,f as S}from"./dialog-BsDEjt1z.js";import{L as a,I as d}from"./label-EPNbaxMW.js";import{S as b,a as N,b as I,c as F,d as l}from"./select-DsP7nRPX.js";import{L as te,C as se,P as ae,T as ne,A as le,a as re,b as de,c as ie,d as ce,e as oe,f as ue,g as me,y as u}from"./alert-dialog-Da5PbGzk.js";/* empty css            */import"./utils-D-KgF5mV.js";import"./index-DndIWvu-.js";import"./createLucideIcon-BX2zHysk.js";import"./index-CogRA1mv.js";import"./index-DRzxHy0K.js";import"./index-CsEdqxbF.js";import"./index-BdULpcBn.js";import"./index-CzjtbFD4.js";function Oe({fee_installments:E,minimal_students:j}){const[P,O]=h.useState(!1),[T,p]=h.useState(!1),[Y,g]=h.useState(!1),[w,v]=h.useState(!1),[r,x]=h.useState(null);console.log(j);const s=B({student_id:0,installment_no:0,amount:0,due_date:"",payment_date:null,status:null}),M=t=>{O(t),t&&(s.reset(),console.log("form",s.data))},k=t=>{t.preventDefault(),console.log("form",s.data),s.post(route("fee-installments.store"),{preserveScroll:!0,fresh:!0,onSuccess:()=>{s.setDefaults({student_id:0,installment_no:0,amount:0,due_date:"",payment_date:null,status:null}),s.reset(),p(!1),u.success("FeeInstallment created successfully")},onError:n=>{Object.values(n).forEach(m=>{u.error(m)}),s.clearErrors()}})},L=t=>{x(t),s.setData({student_id:t.student_id,installment_no:t.installment_no,amount:t.amount,due_date:t.due_date,payment_date:t.payment_date||null,status:t.status||null}),g(!0)},q=t=>{t.preventDefault(),r&&(console.log(s.data),console.log(route("fee-installments.update",[r.student_id,r.installment_no])),s.put(route("fee-installments.update",[r.student_id,r.installment_no]),{onSuccess:()=>{s.setDefaults({student_id:0,installment_no:0,amount:0,due_date:"",payment_date:null,status:null}),g(!1),x(null),s.reset(),u.success("FeeInstallment updated successfully")},onError:n=>{Object.values(n).forEach(m=>{u.error(m)}),s.clearErrors()}}))},H=t=>{x(t),v(!0)},$=()=>{r&&z.delete(route("fee-installments.destroy",[r.student_id,r.installment_no]),{onSuccess:()=>{v(!1),x(null),u.success("FeeInstallment deleted successfully")},onError:t=>{Object.values(t).forEach(n=>{u.error(n)}),s.clearErrors()}})};return e.jsxs(U,{children:[e.jsx(V,{title:"FeeInstallments"}),e.jsx(te,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"FeeInstallment"}),e.jsxs(D,{open:P,onOpenChange:M,children:[e.jsx(ee,{asChild:!0,children:e.jsxs(o,{children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Add fee installment"]})}),e.jsxs(_,{children:[e.jsxs(y,{children:[e.jsx(f,{children:"Add new fee installment"}),e.jsx(C,{children:"create a fee installment for a student in your institution."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"installment_no",children:"Installment No"}),e.jsx(d,{id:"installment_no",type:"number",placeholder:"Enter installment number",value:s.data.installment_no,onChange:t=>s.setData("installment_no",parseInt(t.target.value)),required:!0}),s.errors.installment_no&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.installment_no}),e.jsx(a,{htmlFor:"amount",children:"Amount"}),e.jsx(d,{id:"amount",type:"number",placeholder:"Enter amount",value:s.data.amount,onChange:t=>s.setData("amount",parseFloat(t.target.value)),required:!0}),s.errors.amount&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.amount}),e.jsx(a,{htmlFor:"due_date",children:"Due Date"}),e.jsx(d,{id:"due_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.due_date,onChange:t=>s.setData("due_date",t.target.value),required:!0}),s.errors.due_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.due_date}),e.jsx(a,{htmlFor:"payment_date",children:"Payment Date"}),e.jsx(d,{id:"payment_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.payment_date||"",onChange:t=>s.setData("payment_date",t.target.value)}),s.errors.payment_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.payment_date}),e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(b,{onValueChange:t=>{s.setData("status",t)},children:[e.jsx(N,{id:"status",children:e.jsx(I,{placeholder:"Select status"})}),e.jsxs(F,{children:[e.jsx(l,{value:"Pending",children:"Pending"}),e.jsx(l,{value:"Paid",children:"Paid"}),e.jsx(l,{value:"Overdue",children:"Overdue"}),e.jsx(l,{value:"Cancelled",children:"Cancelled"})]})]}),s.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.status})]}),e.jsx(S,{children:e.jsx(o,{onClick:t=>{t.preventDefault(),O(!1),p(!0)},disabled:s.processing,children:"Next"})})]})]})]})]}),e.jsxs(R,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"FeeInstallment List"}),e.jsx(J,{children:"Manage and organize fee installments in your institution."})]}),e.jsx(Q,{children:e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(A,{children:[e.jsx(i,{children:"Student ID"}),e.jsx(i,{children:"Installment No"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"Due Date"}),e.jsx(i,{children:"Payment Date"}),e.jsx(i,{children:"Status"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(Z,{children:E.map((t,n)=>e.jsxs(A,{children:[e.jsx(c,{children:t.student_id}),e.jsx(c,{children:t.installment_no}),e.jsx(c,{children:"$"+t.amount}),e.jsx(c,{children:t.due_date}),e.jsx(c,{children:t.payment_date||"Not Paid"}),e.jsx(c,{children:t.status||"Pending"}),e.jsxs(c,{className:"text-right space-x-2",children:[e.jsx(o,{variant:"outline",size:"icon",onClick:()=>L(t),children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(o,{variant:"destructive",size:"icon",onClick:()=>H(t),children:e.jsx(ne,{className:"h-4 w-4"})})]})]},n))})]})})]})]}),e.jsx(D,{open:T,onOpenChange:p,children:e.jsxs(_,{children:[e.jsxs(y,{children:[e.jsx(f,{children:"Select student"}),e.jsx(C,{children:"Choose a student to associate with the fee installment."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"department_id",children:"Student ID"}),e.jsxs(b,{onValueChange:t=>{let n=j.find(m=>m.student_id===parseInt(t));document.getElementById("student name").value=`${n.first_name} ${n.last_name}`,s.setData("student_id",parseInt(t))},children:[e.jsx(N,{id:"student_id",children:e.jsx(I,{placeholder:"Select a student"})}),e.jsx(F,{children:j.map(t=>e.jsx(l,{value:t.student_id.toString(),children:t.student_id},t.student_id))})]}),e.jsx(a,{children:"Student Name"}),e.jsx(d,{id:"student name",readOnly:!0})]}),e.jsx(S,{children:e.jsx(o,{type:"submit",disabled:s.processing,children:"Submit"})})]})]})}),e.jsx(D,{open:Y,onOpenChange:g,children:e.jsxs(_,{children:[e.jsxs(y,{children:[e.jsx(f,{children:"Edit fee installment"}),e.jsx(C,{children:"Update the fee installment information."})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"amount",children:"Amount"}),e.jsx(d,{id:"amount",type:"number",placeholder:"Enter amount",value:s.data.amount,onChange:t=>s.setData("amount",parseFloat(t.target.value)),required:!0}),s.errors.amount&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.amount}),e.jsx(a,{htmlFor:"due_date",children:"Due Date"}),e.jsx(d,{id:"due_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.due_date,onChange:t=>s.setData("due_date",t.target.value),required:!0}),s.errors.due_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.due_date}),e.jsx(a,{htmlFor:"payment_date",children:"Payment Date"}),e.jsx(d,{id:"payment_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.payment_date||"",onChange:t=>s.setData("payment_date",t.target.value)}),s.errors.payment_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.payment_date}),e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(b,{onValueChange:t=>{s.setData("status",t)},children:[e.jsx(N,{id:"status",children:e.jsx(I,{placeholder:"Select status"})}),e.jsxs(F,{children:[e.jsx(l,{value:"Pending",children:"Pending"}),e.jsx(l,{value:"Paid",children:"Paid"}),e.jsx(l,{value:"Overdue",children:"Overdue"}),e.jsx(l,{value:"Cancelled",children:"Cancelled"})]})]}),s.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.status})]})}),e.jsx(S,{children:e.jsx(o,{type:"submit",disabled:s.processing,children:"Update FeeInstallment"})})]})]})}),e.jsx(le,{open:w,onOpenChange:v,children:e.jsxs(re,{children:[e.jsxs(de,{children:[e.jsx(ie,{children:"Are you sure?"}),e.jsx(ce,{children:"This action cannot be undone. This will permanently delete the subject and remove it from our servers."})]}),e.jsxs(oe,{children:[e.jsx(ue,{children:"Cancel"}),e.jsx(me,{onClick:$,className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{Oe as default};
