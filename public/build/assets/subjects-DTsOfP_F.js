import{r as o,v as q,j as e,$ as se,m as re}from"./app-C1hgEOo7.js";import{A as te,C as ae,a as ce,b as ie,c as le,d as ne,T as de,e as oe,f as B,g as u,h as he,i as j}from"./app-DwIirEcu.js";import{B as l}from"./button-CDfH7Em9.js";import{D as x,a as ue,b as m,c as p,d as g,e as C,f as S}from"./dialog-BsDEjt1z.js";import{L as t,I as c}from"./label-EPNbaxMW.js";import{S as f,a as v,b as D,c as y,d as i}from"./select-DsP7nRPX.js";import{L as je,C as xe,P as me,T as pe,A as ge,a as Ce,b as Se,c as fe,d as ve,e as De,f as ye,g as _e,y as h}from"./alert-dialog-Da5PbGzk.js";import{E as be}from"./eye-BLQserRk.js";/* empty css            */import"./utils-D-KgF5mV.js";import"./index-DndIWvu-.js";import"./createLucideIcon-BX2zHysk.js";import"./index-CogRA1mv.js";import"./index-DRzxHy0K.js";import"./index-CsEdqxbF.js";import"./index-BdULpcBn.js";import"./index-CzjtbFD4.js";function Pe({subjects:O,minimal_courses:T,minimal_classrooms:H,minimal_teachers:V,minimal_classes:z}){const[$,L]=o.useState(!1),[M,E]=o.useState(!1),[P,I]=o.useState(!1),[U,F]=o.useState(!1),[W,w]=o.useState(!1),[R,k]=o.useState(!1),[K,A]=o.useState(!1),[b,N]=o.useState(null),r=q({course_id:0,name:"",code:"",credits:null,description:null}),n=q({classroom_id:0,day_of_week:"",start_time:"",end_time:""}),_=q({class_id:0,teacher_id:null}),G=s=>{L(s),s&&r.reset()},J=s=>{s.preventDefault(),console.log("form",r.data),r.post(route("subjects.store"),{onSuccess:()=>{r.reset(),console.log("classSubjectForm",_.data),_.post(route("class-subjects.store"),{onSuccess:()=>{_.reset(),console.log("scheduleForm",n.data),n.post(route("schedules.store"),{onSuccess:()=>{w(!1),n.reset()},onError:a=>{Object.values(a).forEach(d=>{h.error(d)})}})},onError:a=>{Object.values(a).forEach(d=>{h.error(d)})}}),h.success("Subject created successfully")},onError:a=>{Object.values(a).forEach(d=>{h.error(d)})}})},Q=s=>{window.open(route("subject-detail.show",s.subject_id),"_blank")},X=s=>{N(s),r.setData("course_id",s.course_id),r.setData("name",s.name),r.setData("code",s.code),r.setData("credits",s.credits),r.setData("description",s.description),k(!0)},Y=s=>{s.preventDefault(),b&&r.put(route("subjects.update",b.subject_id),{onSuccess:()=>{k(!1),N(null),r.reset(),h.success("Subject updated successfully")},onError:a=>{h.error("Failed to update subject")}})},Z=s=>{N(s),A(!0)},ee=()=>{b&&re.delete(route("subjects.destroy",b.subject_id),{onSuccess:()=>{A(!1),N(null),h.success("Subject deleted successfully")},onError:s=>{h.error("Failed to delete subject")}})};return e.jsxs(te,{children:[e.jsx(se,{title:"Subjects"}),e.jsx(je,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subject"}),e.jsxs(x,{open:$,onOpenChange:G,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Add Subject"]})}),e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Add New Subject"}),e.jsx(C,{children:"Create a new subject in the system."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(c,{id:"name",placeholder:"Enter name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),required:!0}),e.jsx(t,{htmlFor:"code",children:"Code"}),e.jsx(c,{id:"code",placeholder:"Enter code",value:r.data.code||"",onChange:s=>r.setData("code",s.target.value),required:!0}),e.jsx(t,{htmlFor:"credit",children:"Credit"}),e.jsx(c,{id:"credit",placeholder:"Enter credit",type:"number",value:r.data.credits||"",onChange:s=>r.setData("credits",parseInt(s.target.value)),required:!0}),e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(c,{id:"description",placeholder:"Enter description",value:r.data.description||"",onChange:s=>r.setData("description",s.target.value),required:!0})]}),e.jsx(S,{children:e.jsx(l,{onClick:s=>{s.preventDefault(),L(!1),E(!0)},disabled:r.processing,children:"Next"})})]})]})]})]}),e.jsxs(ae,{children:[e.jsxs(ce,{children:[e.jsx(ie,{children:"Subject List"}),e.jsx(le,{children:"Manage and organize subjects in your institution."})]}),e.jsx(ne,{children:e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(B,{children:[e.jsx(u,{children:"ID"}),e.jsx(u,{children:"Course ID"}),e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Code"}),e.jsx(u,{children:"Credits"}),e.jsx(u,{children:"Description"}),e.jsx(u,{className:"text-right",children:"Actions"})]})}),e.jsx(he,{children:O==null?void 0:O.map(s=>e.jsxs(B,{children:[e.jsx(j,{className:"font-medium",children:s.subject_id}),e.jsx(j,{children:s.course_id}),e.jsx(j,{children:s.name}),e.jsx(j,{children:s.code}),e.jsx(j,{children:s.credits}),e.jsx(j,{children:s.description}),e.jsxs(j,{className:"text-right space-x-2",children:[e.jsx(l,{variant:"outline",size:"icon",onClick:a=>Q(s),children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"icon",onClick:a=>X(s),children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(l,{variant:"destructive",size:"icon",onClick:a=>Z(s),children:e.jsx(pe,{className:"h-4 w-4"})})]})]},s.subject_id))})]})})]})]}),e.jsx(x,{open:M,onOpenChange:E,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Select Course"}),e.jsx(C,{children:"Choose a course to associate with the subject."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"course_id",children:"Course ID"}),e.jsxs(f,{onValueChange:s=>{let a=T.find(d=>d.course_id===parseInt(s));document.getElementById("course name").value=a.name,r.setData("course_id",parseInt(s))},children:[e.jsx(v,{id:"course_id",children:e.jsx(D,{placeholder:"Select a course"})}),e.jsx(y,{children:T.map(s=>e.jsx(i,{value:s.course_id.toString(),children:s.course_id},s.course_id))})]}),e.jsx(t,{children:"Course Name"}),e.jsx(c,{id:"course name",readOnly:!0})]}),e.jsx(S,{children:e.jsx(l,{onClick:s=>{s.preventDefault(),E(!1),I(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(x,{open:P,onOpenChange:I,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Set Schedule"}),e.jsx(C,{children:"Set the schedule for the subject. This will allow students to see when the subject is taught."})]}),e.jsxs("form",{onSubmit:s=>s.preventDefault(),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"day of week",children:"Day of Week"}),e.jsxs(f,{onValueChange:s=>n.setData("day_of_week",s),children:[e.jsx(v,{id:"day of week",children:e.jsx(D,{placeholder:"Select a day"})}),e.jsxs(y,{children:[e.jsx(i,{value:"Monday",children:"Monday"}),e.jsx(i,{value:"Tuesday",children:"Tuesday"}),e.jsx(i,{value:"Wednesday",children:"Wednesday"}),e.jsx(i,{value:"Thursday",children:"Thursday"}),e.jsx(i,{value:"Friday",children:"Friday"}),e.jsx(i,{value:"Saturday",children:"Saturday"}),e.jsx(i,{value:"Sunday",children:"Sunday"})]})]}),e.jsx(t,{htmlFor:"start_time",children:"Start Time"}),e.jsx(c,{id:"start_time",type:"time",value:n.data.start_time,onChange:s=>n.setData("start_time",s.target.value),required:!0}),e.jsx(t,{htmlFor:"end_time",children:"End Time"}),e.jsx(c,{id:"end_time",type:"time",value:n.data.end_time,onChange:s=>n.setData("end_time",s.target.value),required:!0})]}),e.jsx(S,{children:e.jsx(l,{onClick:s=>{s.preventDefault(),I(!1),F(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(x,{open:U,onOpenChange:F,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Select Classroom"}),e.jsx(C,{children:"Choose a classroom to associate with the subject schedule."})]}),e.jsxs("form",{onSubmit:s=>s.preventDefault(),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"classroom_id",children:"Classroom ID"}),e.jsxs(f,{onValueChange:s=>{n.setData("classroom_id",parseInt(s))},children:[e.jsx(v,{id:"classroom_id",children:e.jsx(D,{placeholder:"Select a classroom"})}),e.jsx(y,{children:H.map(s=>e.jsx(i,{value:s.classroom_id.toString(),children:s.classroom_id},s.classroom_id))})]}),e.jsx(t,{children:"Class"}),e.jsxs(f,{onValueChange:s=>{_.setData("class_id",parseInt(s))},children:[e.jsx(v,{id:"classid",children:e.jsx(D,{placeholder:"Select a class"})}),e.jsx(y,{children:z.map(s=>e.jsx(i,{value:s.class_id.toString(),children:s.class_id},s.class_id))})]})]}),e.jsx(S,{children:e.jsx(l,{onClick:s=>{s.preventDefault(),F(!1),w(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(x,{open:W,onOpenChange:w,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Select Teacher"}),e.jsx(C,{children:"Choose a teacher to assign to the subject."})]}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"teacher_id",children:"Teacher ID"}),e.jsxs(f,{onValueChange:s=>{let a=V.find(d=>d.teacher_id===parseInt(s));document.getElementById("teacher name").value=`${a.first_name} ${a.last_name}`,_.setData("teacher_id",parseInt(s))},children:[e.jsx(v,{id:"teacher_id",children:e.jsx(D,{placeholder:"Select a teacher"})}),e.jsx(y,{children:V.map(s=>e.jsx(i,{value:s.teacher_id.toString(),children:s.teacher_id},s.teacher_id))})]}),e.jsx(t,{children:"Teacher Name"}),e.jsx(c,{id:"teacher name",readOnly:!0})]}),e.jsx(S,{children:e.jsx(l,{type:"submit",disabled:r.processing,children:"Submit"})})]})]})}),e.jsx(x,{open:R,onOpenChange:k,children:e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Edit subject"}),e.jsx(C,{children:"Update the subject information."})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"course_id",children:"Course ID"}),e.jsxs(f,{onValueChange:s=>{r.setData("course_id",parseInt(s))},children:[e.jsx(v,{id:"course_id",children:e.jsx(D,{placeholder:"Select a course"})}),e.jsx(y,{children:T.map(s=>e.jsx(i,{value:s.course_id.toString(),children:s.course_id},s.course_id))})]})]}),e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(c,{id:"name",placeholder:"Enter name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),required:!0}),e.jsx(t,{htmlFor:"code",children:"Code"}),e.jsx(c,{id:"code",placeholder:"Enter code",value:r.data.code||"",onChange:s=>r.setData("code",s.target.value),required:!0}),e.jsx(t,{htmlFor:"credit",children:"Credit"}),e.jsx(c,{id:"credit",placeholder:"Enter credit",type:"number",value:r.data.credits||"",onChange:s=>r.setData("credits",parseInt(s.target.value)),required:!0}),e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(c,{id:"description",placeholder:"Enter description",value:r.data.description||"",onChange:s=>r.setData("description",s.target.value),required:!0}),r.errors.course_id&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.course_id}),r.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.name}),r.errors.code&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.code}),r.errors.credits&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.credits}),r.errors.description&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.description})]}),e.jsx(S,{children:e.jsx(l,{type:"submit",disabled:r.processing,children:"Update Subject"})})]})]})}),e.jsx(ge,{open:K,onOpenChange:A,children:e.jsxs(Ce,{children:[e.jsxs(Se,{children:[e.jsx(fe,{children:"Are you sure?"}),e.jsx(ve,{children:"This action cannot be undone. This will permanently delete the subject and remove it from our servers."})]}),e.jsxs(De,{children:[e.jsx(ye,{children:"Cancel"}),e.jsx(_e,{onClick:ee,className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{Pe as default};
