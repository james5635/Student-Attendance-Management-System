import{r as c,v as V,j as e,$ as R,m as $}from"./app-C1hgEOo7.js";import{A as K,C as M,a as G,b as J,c as Q,d as W,T as X,e as Y,f as S,g as n,h as Z,i}from"./app-DwIirEcu.js";import{B as d}from"./button-CDfH7Em9.js";import{D as C,a as ee,b as D,c as v,d as f,e as _,f as b}from"./dialog-BsDEjt1z.js";import{L as t,I as a}from"./label-EPNbaxMW.js";import{S as y,a as E,b as I,c as A,d as O}from"./select-DsP7nRPX.js";import{L as se,C as re,P as te,T as ae,A as ne,a as ie,b as de,c as le,d as ce,e as oe,f as me,g as ue,y as l}from"./alert-dialog-Da5PbGzk.js";/* empty css            */import"./utils-D-KgF5mV.js";import"./index-DndIWvu-.js";import"./createLucideIcon-BX2zHysk.js";import"./index-CogRA1mv.js";import"./index-DRzxHy0K.js";import"./index-CsEdqxbF.js";import"./index-BdULpcBn.js";import"./index-CzjtbFD4.js";function Ae({courses:T,minimal_departments:h}){const[F,N]=c.useState(!1),[w,p]=c.useState(!1),[k,x]=c.useState(!1),[q,j]=c.useState(!1),[o,m]=c.useState(null),r=V({department_id:null,name:"",code:"",duration_semesters:null,description:null}),L=s=>{N(s),s&&(r.reset(),console.log("form",r.data))},H=s=>{s.preventDefault(),console.log("form",r.data),r.post(route("courses.store"),{preserveScroll:!0,fresh:!0,onSuccess:()=>{r.setDefaults({department_id:null,name:"",code:"",duration_semesters:null,description:null}),r.reset(),p(!1),l.success("Course created successfully")},onError:u=>{Object.values(u).forEach(g=>{l.error(g)}),r.clearErrors()}})},B=s=>{m(s),r.setData({name:s.name,code:s.code,department_id:s.department_id,duration_semesters:s.duration_semesters,description:s.description}),x(!0)},P=s=>{s.preventDefault(),o&&r.put(route("courses.update",o.course_id),{onSuccess:()=>{r.setDefaults({department_id:null,name:"",code:"",duration_semesters:null,description:null}),x(!1),m(null),r.reset(),l.success("Course updated successfully")},onError:u=>{l.error("Failed to update subject"),r.clearErrors()}})},z=s=>{m(s),j(!0)},U=()=>{o&&$.delete(route("courses.destroy",o.course_id),{onSuccess:()=>{j(!1),m(null),l.success("Course deleted successfully")},onError:s=>{l.error("Failed to delete subject")}})};return e.jsxs(K,{children:[e.jsx(R,{title:"Courses"}),e.jsx(se,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Course"}),e.jsxs(C,{open:F,onOpenChange:L,children:[e.jsx(ee,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Add Course"]})}),e.jsxs(D,{children:[e.jsxs(v,{children:[e.jsx(f,{children:"Add New Course"}),e.jsx(_,{children:"Create a new course in the system."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(a,{id:"name",placeholder:"Enter course name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),required:!0}),r.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.name}),e.jsx(t,{htmlFor:"code",children:"Code"}),e.jsx(a,{id:"code",placeholder:"Enter course code",value:r.data.code||"",onChange:s=>r.setData("code",s.target.value),required:!0}),r.errors.code&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.code}),e.jsx(t,{htmlFor:"duration_semesters",children:"Duration Semester"}),e.jsx(a,{id:"duration_semesters",placeholder:"Enter duration_semesters",type:"number",value:r.data.duration_semesters||"",onChange:s=>r.setData("duration_semesters",parseInt(s.target.value)),required:!0}),r.errors.duration_semesters&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.duration_semesters}),e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(a,{id:"description",placeholder:"Enter description",value:r.data.description||"",onChange:s=>r.setData("description",s.target.value),required:!0}),r.errors.description&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.description})]}),e.jsx(b,{children:e.jsx(d,{onClick:s=>{s.preventDefault(),N(!1),p(!0)},disabled:r.processing,children:"Next"})})]})]})]})]}),e.jsxs(M,{children:[e.jsxs(G,{children:[e.jsx(J,{children:"Course List"}),e.jsx(Q,{children:"Manage and organize courses in your institution."})]}),e.jsx(W,{children:e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(S,{children:[e.jsx(n,{children:"Course ID"}),e.jsx(n,{children:"Department ID"}),e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Code"}),e.jsx(n,{children:"Duration Semester"}),e.jsx(n,{children:"Description"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(Z,{children:T.map(s=>e.jsxs(S,{children:[e.jsx(i,{children:s.course_id}),e.jsx(i,{children:s.department_id}),e.jsx(i,{children:s.name}),e.jsx(i,{children:s.code}),e.jsx(i,{children:s.duration_semesters}),e.jsx(i,{children:s.description}),e.jsxs(i,{className:"text-right space-x-2",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>B(s),children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(d,{variant:"destructive",size:"icon",onClick:()=>z(s),children:e.jsx(ae,{className:"h-4 w-4"})})]})]},s.course_id))})]})})]})]}),e.jsx(C,{open:w,onOpenChange:p,children:e.jsxs(D,{children:[e.jsxs(v,{children:[e.jsx(f,{children:"Select Department"}),e.jsx(_,{children:"Choose a department to associate with the course."})]}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"department_id",children:"Department ID"}),e.jsxs(y,{onValueChange:s=>{let u=h.find(g=>g.department_id===parseInt(s));document.getElementById("department name").value=u.name,r.setData("department_id",parseInt(s))},children:[e.jsx(E,{id:"department_id",children:e.jsx(I,{placeholder:"Select a department"})}),e.jsx(A,{children:h.map(s=>e.jsx(O,{value:s.department_id.toString(),children:s.department_id},s.department_id))})]}),e.jsx(t,{children:"Department Name"}),e.jsx(a,{id:"department name",readOnly:!0})]}),e.jsx(b,{children:e.jsx(d,{type:"submit",disabled:r.processing,children:"Submit"})})]})]})}),e.jsx(C,{open:k,onOpenChange:x,children:e.jsxs(D,{children:[e.jsxs(v,{children:[e.jsx(f,{children:"Edit subject"}),e.jsx(_,{children:"Update the subject information."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"department_id",children:"Department ID"}),e.jsxs(y,{onValueChange:s=>{r.setData("department_id",parseInt(s))},children:[e.jsx(E,{id:"department_id",children:e.jsx(I,{placeholder:"Select a department"})}),e.jsx(A,{children:h.map(s=>e.jsx(O,{value:s.department_id.toString(),children:s.department_id},s.department_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(a,{id:"name",placeholder:"Enter course name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),required:!0}),r.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.name}),e.jsx(t,{htmlFor:"code",children:"Code"}),e.jsx(a,{id:"code",placeholder:"Enter course code",value:r.data.code||"",onChange:s=>r.setData("code",s.target.value),required:!0}),r.errors.code&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.code}),e.jsx(t,{htmlFor:"duration_semesters",children:"Duration Semester"}),e.jsx(a,{id:"duration_semesters",placeholder:"Enter duration_semesters",type:"number",value:r.data.duration_semesters||"",onChange:s=>r.setData("duration_semesters",parseInt(s.target.value)),required:!0}),r.errors.duration_semesters&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.duration_semesters}),e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(a,{id:"description",placeholder:"Enter description",value:r.data.description||"",onChange:s=>r.setData("description",s.target.value),required:!0}),r.errors.description&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.description})]})]}),e.jsx(b,{children:e.jsx(d,{type:"submit",disabled:r.processing,children:"Update Course"})})]})]})}),e.jsx(ne,{open:q,onOpenChange:j,children:e.jsxs(ie,{children:[e.jsxs(de,{children:[e.jsx(le,{children:"Are you sure?"}),e.jsx(ce,{children:"This action cannot be undone. This will permanently delete the subject and remove it from our servers."})]}),e.jsxs(oe,{children:[e.jsx(me,{children:"Cancel"}),e.jsx(ue,{onClick:U,className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{Ae as default};
