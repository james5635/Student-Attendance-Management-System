import{r as h,v as H,j as e,$,m as C}from"./app-C1hgEOo7.js";import{A as B,C as P,a as z,b as U,c as V,d as R,T as K,e as G,f as N,g as d,h as J,i}from"./app-DwIirEcu.js";import{B as c}from"./button-CDfH7Em9.js";import{D,a as Q,b as g,c as _,d as y,e as b,f as v}from"./dialog-BsDEjt1z.js";import{L as r,I as l}from"./label-EPNbaxMW.js";import{S as W,a as X,b as Z,c as ee,d as te}from"./select-DsP7nRPX.js";import{L as se,C as ae,P as re,T as le,A as ne,a as de,b as ie,c as ce,d as oe,e as ue,f as he,g as me,y as o}from"./alert-dialog-Da5PbGzk.js";import{E as xe}from"./eye-BLQserRk.js";import{c as pe}from"./createLucideIcon-BX2zHysk.js";/* empty css            */import"./utils-D-KgF5mV.js";import"./index-DndIWvu-.js";import"./index-CogRA1mv.js";import"./index-DRzxHy0K.js";import"./index-CsEdqxbF.js";import"./index-BdULpcBn.js";import"./index-CzjtbFD4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],fe=pe("Download",je);function ke({student_documents:E,minimal_students:x}){const[O,S]=h.useState(!1),[T,p]=h.useState(!1),[A,j]=h.useState(!1),[I,f]=h.useState(!1),[n,m]=h.useState(null);console.log(x);const s=H({student_id:0,document_type:"",file:null,issue_date:"",submitted_date:null}),Y=t=>{S(t),t&&(s.reset(),console.log("form",s.data))},w=t=>{t.preventDefault(),console.log("form",s.data),s.post(route("student-documents.store"),{preserveScroll:!0,fresh:!0,forceFormData:!0,onSuccess:()=>{s.setDefaults({student_id:0,document_type:"",file:null,issue_date:"",submitted_date:null}),s.reset(),p(!1),o.success("Student Document created successfully")},onError:a=>{Object.values(a).forEach(u=>{o.error(u)}),s.clearErrors()}})},F=t=>{m(t),s.setData({student_id:t.student_id,document_type:t.document_type,file:null,issue_date:t.issue_date,submitted_date:t.submitted_date}),j(!0)},k=t=>{if(t.preventDefault(),!n)return;console.log(s.data);let a=route("student-documents.update",[n.student_id,n.document_type]);console.log(a),C.post(a,{_method:"put",...s.data},{forceFormData:!0,onSuccess:()=>{s.setDefaults({student_id:0,document_type:"",file:null,issue_date:"",submitted_date:null}),j(!1),m(null),s.reset(),o.success("Student Document updated successfully")},onError:u=>{Object.values(u).forEach(q=>{o.error(q)}),s.clearErrors()}})},M=t=>{m(t),f(!0)},L=()=>{n&&C.delete(route("student-documents.destroy",[n.student_id,n.document_type]),{onSuccess:()=>{f(!1),m(null),o.success("Student Document deleted successfully")},onError:t=>{Object.values(t).forEach(a=>{o.error(a)}),s.clearErrors()}})};return e.jsxs(B,{children:[e.jsx($,{title:"StudentDocuments"}),e.jsx(se,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Student Document"}),e.jsxs(D,{open:O,onOpenChange:Y,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Add student document"]})}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(y,{children:"Add new student document"}),e.jsx(b,{children:"create a student document in your institution."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"document_type",children:"Document Type"}),e.jsx(l,{id:"document_type",placeholder:"Enter document type",value:s.data.document_type,onChange:t=>s.setData("document_type",t.target.value),required:!0}),s.errors.document_type&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.document_type}),e.jsx(r,{htmlFor:"file",children:"File"}),e.jsx(l,{id:"file",type:"file",placeholder:"Enter file",onChange:t=>{var a;return s.setData("file",(a=t.target.files)==null?void 0:a[0])},required:!0}),s.errors.file&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.file}),e.jsx(r,{htmlFor:"issue_date",children:"Issue Date"}),e.jsx(l,{id:"issue_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.issue_date,onChange:t=>s.setData("issue_date",t.target.value),required:!0}),s.errors.issue_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.issue_date}),e.jsx(r,{htmlFor:"submitted_date",children:"Submitted Date"}),e.jsx(l,{id:"submitted_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.submitted_date||"",onChange:t=>s.setData("submitted_date",t.target.value)}),s.errors.submitted_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.submitted_date})]}),e.jsx(v,{children:e.jsx(c,{onClick:t=>{t.preventDefault(),S(!1),p(!0)},disabled:s.processing,children:"Next"})})]})]})]})]}),e.jsxs(P,{children:[e.jsxs(z,{children:[e.jsx(U,{children:"StudentDocument List"}),e.jsx(V,{children:"Manage and organize student document in your institution."})]}),e.jsx(R,{children:e.jsxs(K,{children:[e.jsx(G,{children:e.jsxs(N,{children:[e.jsx(d,{children:"Student ID"}),e.jsx(d,{children:"Document Type"}),e.jsx(d,{children:"File"}),e.jsx(d,{children:"Issue Date"}),e.jsx(d,{children:"Submitted Date"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(J,{children:E.map((t,a)=>e.jsxs(N,{children:[e.jsx(i,{children:t.student_id}),e.jsx(i,{children:t.document_type}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("a",{href:`/storage/${t.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:"View"})]}),e.jsxs("a",{href:`/storage/${t.file_path}`,download:!0,className:"flex items-center gap-1 text-green-600 hover:text-green-800 transition-colors",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Download"})]})]})}),e.jsx(i,{children:t.issue_date}),e.jsx(i,{children:t.submitted_date}),e.jsxs(i,{className:"text-right space-x-2",children:[e.jsx(c,{variant:"outline",size:"icon",onClick:()=>F(t),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(c,{variant:"destructive",size:"icon",onClick:()=>M(t),children:e.jsx(le,{className:"h-4 w-4"})})]})]},a))})]})})]})]}),e.jsx(D,{open:T,onOpenChange:p,children:e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(y,{children:"Select student"}),e.jsx(b,{children:"Choose a student for the document."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"department_id",children:"Student ID"}),e.jsxs(W,{onValueChange:t=>{let a=x.find(u=>u.student_id===parseInt(t));document.getElementById("student name").value=`${a.first_name} ${a.last_name}`,s.setData("student_id",parseInt(t))},children:[e.jsx(X,{id:"student_id",children:e.jsx(Z,{placeholder:"Select a student"})}),e.jsx(ee,{children:x.map(t=>e.jsx(te,{value:t.student_id.toString(),children:t.student_id},t.student_id))})]}),e.jsx(r,{children:"Student Name"}),e.jsx(l,{id:"student name",readOnly:!0})]}),e.jsx(v,{children:e.jsx(c,{type:"submit",disabled:s.processing,children:"Submit"})})]})]})}),e.jsx(D,{open:A,onOpenChange:j,children:e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(y,{children:"Edit student document"}),e.jsx(b,{children:"Update the student document information."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"file",children:"File"}),e.jsx(l,{id:"file",type:"file",placeholder:"Enter file",onChange:t=>{var a;return s.setData("file",(a=t.target.files)==null?void 0:a[0])},required:!0}),s.errors.file&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.file}),e.jsx(r,{htmlFor:"issue_date",children:"Issue Date"}),e.jsx(l,{id:"issue_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.issue_date,onChange:t=>s.setData("issue_date",t.target.value),required:!0}),s.errors.issue_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.issue_date}),e.jsx(r,{htmlFor:"submitted_date",children:"Submitted Date"}),e.jsx(l,{id:"submitted_date",type:"date",placeholder:"YYYY-MM-DD",value:s.data.submitted_date||"",onChange:t=>s.setData("submitted_date",t.target.value)}),s.errors.submitted_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.errors.submitted_date})]})}),e.jsx(v,{children:e.jsx(c,{type:"submit",disabled:s.processing,children:"Update Student Document"})})]})]})}),e.jsx(ne,{open:I,onOpenChange:f,children:e.jsxs(de,{children:[e.jsxs(ie,{children:[e.jsx(ce,{children:"Are you sure?"}),e.jsx(oe,{children:"This action cannot be undone. This will permanently delete the subject and remove it from our servers."})]}),e.jsxs(ue,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(me,{onClick:L,className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{ke as default};
