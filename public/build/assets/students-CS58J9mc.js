import{r as x,v as k,j as e,$ as re,m as L}from"./app-C1hgEOo7.js";import{A as te,C as ae,a as le,b as ne,c as de,d as ie,T as ce,e as oe,f as V,g as c,h as he,i as o}from"./app-DwIirEcu.js";import{B as h}from"./button-CDfH7Em9.js";import{D as f,a as me,b as _,c as C,d as D,e as y,f as N}from"./dialog-BsDEjt1z.js";import{L as t,I as a}from"./label-EPNbaxMW.js";import{S as j,a as p,b as v,c as g,d}from"./select-DsP7nRPX.js";import{L as ue,C as xe,P as je,T as pe,A as ve,a as ge,b as fe,c as _e,d as Ce,e as De,f as ye,g as Ne,y as m}from"./alert-dialog-Da5PbGzk.js";import{E as Se}from"./eye-BLQserRk.js";/* empty css            */import"./utils-D-KgF5mV.js";import"./index-DndIWvu-.js";import"./createLucideIcon-BX2zHysk.js";import"./index-CogRA1mv.js";import"./index-DRzxHy0K.js";import"./index-CsEdqxbF.js";import"./index-BdULpcBn.js";import"./index-CzjtbFD4.js";function ze({students:P,minimal_departments:O,minimal_courses:q,minimal_teachers:M}){const[H,B]=x.useState(!1),[z,S]=x.useState(!1),[$,F]=x.useState(!1),[G,I]=x.useState(!1),[U,A]=x.useState(!1),[R,T]=x.useState(!1),[K,Y]=x.useState(!1),[J,w]=x.useState(!1),[b,E]=x.useState(null),r=k({first_name:"",last_name:"",dob:null,gender:null,email:"",phone:null,address:null,department_id:null,enrollment_year:null,status:null}),n=k({course_id:0,year:0,section:"",advisor_id:null}),u=k({enrollment_date:""}),Q=s=>{B(s),s&&(r.reset(),console.log("form",r.data))},W=s=>{s.preventDefault(),console.log("form",r.data),r.post(route("students.store"),{preserveScroll:!0,onSuccess:()=>{r.setDefaults({first_name:"",last_name:"",dob:null,gender:null,email:"",phone:null,address:null,department_id:null,enrollment_year:null,status:null}),r.reset(),S(!1),console.log("schoolClassFrom",n.data),n.post(route("classes.store"),{onSuccess:()=>{n.setDefaults({course_id:0,year:0,section:"",advisor_id:null}),n.reset(),console.log("enrollmentForm",u.data),u.post(route("enrollments.store"),{onSuccess:()=>{u.setDefaults({enrollment_date:""}),u.reset(),T(!1),m.success("Enrollment created successfully")},onError:l=>{Object.values(l).forEach(i=>{m.error(i)}),u.clearErrors()}}),m.success("Class created successfully")},onError:l=>{Object.values(l).forEach(i=>{m.error(i)}),n.clearErrors()}}),m.success("Student created successfully")},onError:l=>{Object.values(l).forEach(i=>{m.error(i)}),r.clearErrors()}})},X=s=>{E(s),r.setData({first_name:s.first_name,last_name:s.last_name,dob:s.dob||null,gender:s.gender||null,email:s.email,phone:s.phone||null,address:s.address||null,department_id:s.department_id||null,enrollment_year:s.enrollment_year||null,status:s.status||null}),Y(!0)},Z=s=>{s.preventDefault(),b&&r.put(route("students.update",b.student_id),{onSuccess:()=>{r.setDefaults({first_name:"",last_name:"",dob:null,gender:null,email:"",phone:null,address:null,department_id:null,enrollment_year:null,status:null}),Y(!1),E(null),r.reset(),m.success("Student updated successfully")},onError:l=>{Object.values(l).forEach(i=>{m.error(i)}),r.clearErrors()}})},ee=s=>{E(s),w(!0)},se=()=>{b&&L.delete(route("students.destroy",b.student_id),{onSuccess:()=>{w(!1),E(null),m.success("Student deleted successfully")},onError:s=>{Object.values(s).forEach(l=>{m.error(l)}),r.clearErrors()}})};return e.jsxs(te,{children:[e.jsx(re,{title:"Students"}),e.jsx(ue,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Student"}),e.jsxs(f,{open:H,onOpenChange:Q,children:[e.jsx(me,{asChild:!0,children:e.jsxs(h,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Add Student"]})}),e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Add New Student"}),e.jsx(y,{children:"Create a new student in the system."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"first_name",children:"First Name"}),e.jsx(a,{id:"first_name",placeholder:"Enter first name",value:r.data.first_name,onChange:s=>r.setData("first_name",s.target.value),required:!0}),r.errors.first_name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.first_name}),e.jsx(t,{htmlFor:"last_name",children:"Last Name"}),e.jsx(a,{id:"last_name",placeholder:"Enter last name",value:r.data.last_name,onChange:s=>r.setData("last_name",s.target.value),required:!0}),r.errors.last_name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.last_name}),e.jsx(t,{htmlFor:"dob",children:"Date of Birth"}),e.jsx(a,{id:"dob",type:"date",placeholder:"YYYY-MM-DD",value:r.data.dob||"",onChange:s=>r.setData("dob",s.target.value),required:!0}),r.errors.dob&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.dob}),e.jsx(t,{htmlFor:"gender",children:"Gender"}),e.jsxs(j,{onValueChange:s=>r.setData("gender",s),value:r.data.gender||void 0,children:[e.jsx(p,{id:"gender",children:e.jsx(v,{placeholder:"Select gender"})}),e.jsxs(g,{children:[e.jsx(d,{value:"Male",children:"Male"}),e.jsx(d,{value:"Female",children:"Female"}),e.jsx(d,{value:"Other",children:"Other"})]})]}),r.errors.gender&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.gender}),e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(a,{id:"email",type:"email",placeholder:"Enter email",value:r.data.email,onChange:s=>r.setData("email",s.target.value),required:!0}),r.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.email}),e.jsx(t,{htmlFor:"phone",children:"Phone"}),e.jsx(a,{id:"phone",type:"tel",placeholder:"Enter phone number",value:r.data.phone||"",onChange:s=>r.setData("phone",s.target.value)}),r.errors.phone&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.phone}),e.jsx(t,{htmlFor:"address",children:"Address"}),e.jsx(a,{id:"address",placeholder:"Enter address",value:r.data.address||"",onChange:s=>r.setData("address",s.target.value)}),r.errors.address&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.address}),e.jsx(t,{htmlFor:"enrollment_year",children:"Enrollment Year"}),e.jsx(a,{id:"enrollment_year",type:"number",placeholder:"Enter enrollment year",value:r.data.enrollment_year||"",onChange:s=>r.setData("enrollment_year",s.target.value?parseInt(s.target.value):null)}),r.errors.enrollment_year&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.enrollment_year}),e.jsx(t,{htmlFor:"status",children:"Status"}),e.jsxs(j,{onValueChange:s=>r.setData("status",s),value:r.data.status||void 0,children:[e.jsx(p,{id:"status",children:e.jsx(v,{placeholder:"Select status"})}),e.jsxs(g,{children:[e.jsx(d,{value:"Active",children:"Active"}),e.jsx(d,{value:"Inactive",children:"Inactive"})]})]}),r.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.status})]}),e.jsx(N,{children:e.jsx(h,{onClick:s=>{s.preventDefault(),B(!1),S(!0)},disabled:r.processing,children:"Next"})})]})]})]})]}),e.jsxs(ae,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:"Student List"}),e.jsx(de,{children:"Manage and organize students in your institution."})]}),e.jsx(ie,{children:e.jsxs(ce,{children:[e.jsx(oe,{children:e.jsxs(V,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{children:"Department ID"}),e.jsx(c,{children:"First Name"}),e.jsx(c,{children:"Last Name"}),e.jsx(c,{children:"Date of Birth"}),e.jsx(c,{children:"Gender"}),e.jsx(c,{children:"Email"}),e.jsx(c,{children:"Phone"}),e.jsx(c,{children:"Address"}),e.jsx(c,{children:"Enrollment Year"}),e.jsx(c,{children:"Status"}),e.jsx(c,{className:"text-right",children:"Actions"})]})}),e.jsx(he,{children:P.map(s=>e.jsxs(V,{children:[e.jsx(o,{children:s.student_id}),e.jsx(o,{children:s.department_id}),e.jsx(o,{children:s.first_name}),e.jsx(o,{children:s.last_name}),e.jsx(o,{children:s.dob||"N/A"}),e.jsx(o,{children:s.gender||"N/A"}),e.jsx(o,{children:s.email}),e.jsx(o,{children:s.phone||"N/A"}),e.jsx(o,{children:s.address||"N/A"}),e.jsx(o,{children:s.enrollment_year||"N/A"}),e.jsx(o,{children:s.status||"N/A"}),e.jsxs(o,{className:"text-right space-x-2",children:[e.jsx(h,{variant:"outline",size:"icon",onClick:()=>L.get(route("students.show",s.student_id)),children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(h,{variant:"outline",size:"icon",onClick:()=>X(s),children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(h,{variant:"destructive",size:"icon",onClick:()=>ee(s),children:e.jsx(pe,{className:"h-4 w-4"})})]})]},s.student_id))})]})})]})]}),e.jsx(f,{open:z,onOpenChange:S,children:e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Select Department"}),e.jsx(y,{children:"Choose a department to associate with the student."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"department_id",children:"Department ID"}),e.jsxs(j,{onValueChange:s=>{let l=O.find(i=>i.department_id===parseInt(s));document.getElementById("department name").value=l.name,r.setData("department_id",parseInt(s))},children:[e.jsx(p,{id:"department_id",children:e.jsx(v,{placeholder:"Select a department"})}),e.jsx(g,{children:O.map(s=>e.jsx(d,{value:s.department_id.toString(),children:s.department_id},s.department_id))})]}),e.jsx(t,{children:"Department Name"}),e.jsx(a,{id:"department name",readOnly:!0})]}),e.jsx(N,{children:e.jsx(h,{onClick:s=>{s.preventDefault(),S(!1),F(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(f,{open:$,onOpenChange:F,children:e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Create Class"}),e.jsx(y,{children:"Create a new class for the student."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Year"}),e.jsx(a,{type:"number",placeholder:"Enter year",value:n.data.year||"",onChange:s=>n.setData("year",s.target.value?parseInt(s.target.value):0),required:!0}),n.errors.year&&e.jsx("p",{className:"text-sm text-destructive",children:n.errors.year}),e.jsx(t,{children:"Section"}),e.jsx(a,{placeholder:"Enter section",value:n.data.section||"",onChange:s=>n.setData("section",s.target.value),required:!0}),n.errors.section&&e.jsx("p",{className:"text-sm text-destructive",children:n.errors.section})]}),e.jsx(N,{children:e.jsx(h,{onClick:s=>{s.preventDefault(),F(!1),I(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(f,{open:G,onOpenChange:I,children:e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Select Course"}),e.jsx(y,{children:"Choose a course to associate with the student."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"course_id",children:"Course ID"}),e.jsxs(j,{onValueChange:s=>{let l=q.find(i=>i.course_id===parseInt(s));document.getElementById("course name").value=l.name,n.setData("course_id",parseInt(s))},children:[e.jsx(p,{id:"course_id",children:e.jsx(v,{placeholder:"Select a department"})}),e.jsx(g,{children:q.map(s=>e.jsx(d,{value:s.course_id.toString(),children:s.course_id},s.course_id))})]}),e.jsx(t,{children:"Course Name"}),e.jsx(a,{id:"course name",readOnly:!0})]}),e.jsx(N,{children:e.jsx(h,{onClick:s=>{s.preventDefault(),I(!1),A(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(f,{open:U,onOpenChange:A,children:e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Select Teacher"}),e.jsx(y,{children:"Choose a teacher to assign as the class advisor for the student."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"course_id",children:"Course ID"}),e.jsxs(j,{onValueChange:s=>{let l=M.find(i=>i.teacher_id===parseInt(s));document.getElementById("teacher name").value=`${l.first_name} ${l.last_name}`,n.setData("advisor_id",parseInt(s))},children:[e.jsx(p,{id:"teacher_id",children:e.jsx(v,{placeholder:"Select a department"})}),e.jsx(g,{children:M.map(s=>e.jsx(d,{value:s.teacher_id.toString(),children:s.teacher_id},s.teacher_id))})]}),e.jsx(t,{children:"Teacher Name"}),e.jsx(a,{id:"teacher name",readOnly:!0})]}),e.jsx(N,{children:e.jsx(h,{onClick:s=>{s.preventDefault(),A(!1),T(!0)},disabled:r.processing,children:"Next"})})]})]})}),e.jsx(f,{open:R,onOpenChange:T,children:e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Create Enrollment"}),e.jsx(y,{children:"Enroll the student"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Enrollment Date"}),e.jsx(a,{type:"date",placeholder:"YYYY-MM-DD",value:u.data.enrollment_date||"",onChange:s=>u.setData("enrollment_date",s.target.value),required:!0}),u.errors.enrollment_date&&e.jsx("p",{className:"text-sm text-destructive",children:u.errors.enrollment_date})]}),e.jsx(N,{children:e.jsx(h,{type:"submit",disabled:r.processing,children:"Submit"})})]})]})}),e.jsx(f,{open:K,onOpenChange:Y,children:e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(D,{children:"Edit student"}),e.jsx(y,{children:"Update the student information."})]}),e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"department_id",children:"Department ID"}),e.jsxs(j,{onValueChange:s=>{r.setData("department_id",parseInt(s))},children:[e.jsx(p,{id:"department_id",children:e.jsx(v,{placeholder:"Select a department"})}),e.jsx(g,{children:O.map(s=>e.jsx(d,{value:s.department_id.toString(),children:s.department_id},s.department_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"first_name",children:"First Name"}),e.jsx(a,{id:"first_name",placeholder:"Enter first name",value:r.data.first_name,onChange:s=>r.setData("first_name",s.target.value),required:!0}),r.errors.first_name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.first_name}),e.jsx(t,{htmlFor:"last_name",children:"Last Name"}),e.jsx(a,{id:"last_name",placeholder:"Enter last name",value:r.data.last_name,onChange:s=>r.setData("last_name",s.target.value),required:!0}),r.errors.last_name&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.last_name}),e.jsx(t,{htmlFor:"dob",children:"Date of Birth"}),e.jsx(a,{id:"dob",type:"date",placeholder:"YYYY-MM-DD",value:r.data.dob||"",onChange:s=>r.setData("dob",s.target.value),required:!0}),r.errors.dob&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.dob}),e.jsx(t,{htmlFor:"gender",children:"Gender"}),e.jsxs(j,{onValueChange:s=>r.setData("gender",s),value:r.data.gender||void 0,children:[e.jsx(p,{id:"gender",children:e.jsx(v,{placeholder:"Select gender"})}),e.jsxs(g,{children:[e.jsx(d,{value:"Male",children:"Male"}),e.jsx(d,{value:"Female",children:"Female"}),e.jsx(d,{value:"Other",children:"Other"})]})]}),r.errors.gender&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.gender}),e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(a,{id:"email",type:"email",placeholder:"Enter email",value:r.data.email,onChange:s=>r.setData("email",s.target.value),required:!0}),r.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.email}),e.jsx(t,{htmlFor:"phone",children:"Phone"}),e.jsx(a,{id:"phone",type:"tel",placeholder:"Enter phone number",value:r.data.phone||"",onChange:s=>r.setData("phone",s.target.value)}),r.errors.phone&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.phone}),e.jsx(t,{htmlFor:"address",children:"Address"}),e.jsx(a,{id:"address",placeholder:"Enter address",value:r.data.address||"",onChange:s=>r.setData("address",s.target.value)}),r.errors.address&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.address}),e.jsx(t,{htmlFor:"enrollment_year",children:"Enrollment Year"}),e.jsx(a,{id:"enrollment_year",type:"number",placeholder:"Enter enrollment year",value:r.data.enrollment_year||"",onChange:s=>r.setData("enrollment_year",s.target.value?parseInt(s.target.value):null)}),r.errors.enrollment_year&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.enrollment_year}),e.jsx(t,{htmlFor:"status",children:"Status"}),e.jsxs(j,{onValueChange:s=>r.setData("status",s),value:r.data.status||void 0,children:[e.jsx(p,{id:"status",children:e.jsx(v,{placeholder:"Select status"})}),e.jsxs(g,{children:[e.jsx(d,{value:"Active",children:"Active"}),e.jsx(d,{value:"Inactive",children:"Inactive"})]})]}),r.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.status})]})]}),e.jsx(N,{children:e.jsx(h,{type:"submit",disabled:r.processing,children:"Update Student"})})]})]})}),e.jsx(ve,{open:J,onOpenChange:w,children:e.jsxs(ge,{children:[e.jsxs(fe,{children:[e.jsx(_e,{children:"Are you sure?"}),e.jsx(Ce,{children:"This action cannot be undone. This will permanently delete the subject and remove it from our servers."})]}),e.jsxs(De,{children:[e.jsx(ye,{children:"Cancel"}),e.jsx(Ne,{onClick:se,className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{ze as default};
