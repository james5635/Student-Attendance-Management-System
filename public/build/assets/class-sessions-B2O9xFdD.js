import{r as x,v as B,j as e,$ as ae,m as Y}from"./app-C1hgEOo7.js";import{A as re,C as le,a as ne,b as ie,c as ce,d as de,T as oe,e as he,f as q,g as p,h as ue,i as _}from"./app-DwIirEcu.js";import{B as d}from"./button-CDfH7Em9.js";import{D as S,a as je,b as g,c as v,d as C,e as f,f as b}from"./dialog-BsDEjt1z.js";import{L as a,I as i}from"./label-EPNbaxMW.js";import{S as o,a as h,b as u,c as j,d as n}from"./select-DsP7nRPX.js";import{L as xe,C as me,P as pe,T as _e,A as Se,a as ge,b as ve,c as Ce,d as fe,e as be,f as De,g as ye,y as m}from"./alert-dialog-Da5PbGzk.js";import{E as Ne}from"./eye-BLQserRk.js";/* empty css            */import"./utils-D-KgF5mV.js";import"./index-DndIWvu-.js";import"./createLucideIcon-BX2zHysk.js";import"./index-CogRA1mv.js";import"./index-DRzxHy0K.js";import"./index-CsEdqxbF.js";import"./index-BdULpcBn.js";import"./index-CzjtbFD4.js";function Re({class_sessions:z,minimal_students:M,minimal_subjects:D,minimal_teachers:y,minimal_classes:P}){const[R,V]=x.useState(!1),[U,O]=x.useState(!1),[$,E]=x.useState(!1),[K,A]=x.useState(!1),[W,T]=x.useState(!1),[G,F]=x.useState(!1),[J,k]=x.useState(!1),[N,I]=x.useState(null),t=B({session_date:"",start_time:"",end_time:"",status:null,subject_id:0,teacher_id:0,class_id:0}),c=B({student_id:0,status:"",remarks:null});function L(s){return s.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0})}const Q=s=>{V(s),s&&(t.reset(),console.log("form",t.data))},X=s=>{s.preventDefault(),console.log("form",t.data),t.post(route("class-sessions.store"),{preserveScroll:!0,onSuccess:()=>{t.setDefaults({session_date:"",start_time:"",end_time:"",status:null,subject_id:0,teacher_id:0,class_id:0}),t.reset(),console.log("attendenceForm",c.data),c.post(route("attendances.store"),{preserveScroll:!0,onSuccess:()=>{c.setDefaults({student_id:0,status:"",remarks:null}),c.reset(),m.success("Attendance created successfully")},onError:l=>{Object.values(l).forEach(r=>{m.error(r)}),c.clearErrors()}}),A(!1),m.success("ClassSession created successfully")},onError:l=>{Object.values(l).forEach(r=>{m.error(r)}),t.clearErrors()}})},Z=s=>{t.setData({session_date:s.session_date,start_time:s.start_time,end_time:s.end_time,status:s.status}),console.log("form",t.data),I(s),T(!0)},ee=s=>{s.preventDefault(),N&&t.put(route("class-sessions.update",N.session_id),{onSuccess:()=>{t.setDefaults({session_date:"",start_time:"",end_time:"",status:null,subject_id:0,teacher_id:0,class_id:0}),F(!1),I(null),t.reset(),m.success("ClassSession updated successfully")},onError:l=>{Object.values(l).forEach(r=>{m.error(r)}),t.clearErrors()}})},se=s=>{I(s),k(!0)},te=()=>{N&&Y.delete(route("class-sessions.destroy",N.session_id),{onSuccess:()=>{k(!1),I(null),m.success("ClassSession deleted successfully")},onError:s=>{Object.values(s).forEach(l=>{m.error(l)}),t.clearErrors()}})};return e.jsxs(re,{children:[e.jsx(ae,{title:"ClassSessions"}),e.jsx(xe,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"ClassSession"}),e.jsxs(S,{open:R,onOpenChange:Q,children:[e.jsx(je,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Add ClassSession"]})}),e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(C,{children:"Add New ClassSession"}),e.jsx(f,{children:"Fill in the details to create a new class session."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"session_date",children:"Session Date"}),e.jsx(i,{id:"session_date",type:"date",placeholder:"YYYY-MM-DD",value:t.data.session_date,onChange:s=>t.setData("session_date",s.target.value),required:!0}),t.errors.session_date&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.session_date}),e.jsx(a,{htmlFor:"start_time",children:"Start Time"}),e.jsx(i,{id:"start_time",type:"time",placeholder:"HH:MM",value:t.data.start_time,onChange:s=>t.setData("start_time",s.target.value),required:!0}),t.errors.start_time&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.start_time}),e.jsx(a,{htmlFor:"end_time",children:"End Time"}),e.jsx(i,{id:"end_time",type:"time",placeholder:"HH:MM",value:t.data.end_time,onChange:s=>t.setData("end_time",s.target.value),required:!0}),t.errors.end_time&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.end_time}),e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(o,{onValueChange:s=>t.setData("status",s),value:t.data.status||void 0,children:[e.jsx(h,{id:"status",children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(n,{value:"Active",children:"Active"}),e.jsx(n,{value:"Inactive",children:"Inactive"}),e.jsx(n,{value:"Cancelled",children:"Cancelled"}),e.jsx(n,{value:"Completed",children:"Completed"})]})]}),t.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.status})]}),e.jsx(b,{children:e.jsx(d,{onClick:s=>{s.preventDefault(),V(!1),O(!0)},disabled:t.processing,children:"Next"})})]})]})]})]}),e.jsxs(le,{children:[e.jsxs(ne,{children:[e.jsx(ie,{children:"ClassSession List"}),e.jsx(ce,{children:"Manage and organize class_sessions in your institution."})]}),e.jsx(de,{children:e.jsxs(oe,{children:[e.jsx(he,{children:e.jsxs(q,{children:[e.jsx(p,{children:"ID"}),e.jsx(p,{children:"Session Date"}),e.jsx(p,{children:"Start Time"}),e.jsx(p,{children:"End Time"}),e.jsx(p,{children:"Status"}),e.jsx(p,{className:"text-right",children:"Actions"})]})}),e.jsx(ue,{children:z.map((s,l)=>e.jsxs(q,{children:[e.jsx(_,{children:s.session_id}),e.jsx(_,{children:s.session_date}),e.jsx(_,{children:(()=>{let r=new Date,w=s.start_time.split(":").map(H=>parseInt(H));return r.setHours(...w),L(r)})()}),e.jsx(_,{children:(()=>{let r=new Date,w=s.end_time.split(":").map(H=>parseInt(H));return r.setHours(...w),L(r)})()}),e.jsx(_,{children:s.status}),e.jsxs(_,{className:"text-right space-x-2",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>Y.get(route("class-sessions.show",s.session_id)),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>Z(s),children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(d,{variant:"destructive",size:"icon",onClick:()=>se(s),children:e.jsx(_e,{className:"h-4 w-4"})})]})]},l))})]})})]})]}),e.jsx(S,{open:U,onOpenChange:O,children:e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(C,{children:"Select Class Subject"}),e.jsx(f,{children:"Please select a class subject to proceed with creating a class session."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"department_id",children:"Subject ID"}),e.jsxs(o,{onValueChange:s=>{let l=D.find(r=>r.subject_id===parseInt(s));document.getElementById("subject name").value=l.name,t.setData("subject_id",parseInt(s))},children:[e.jsx(h,{id:"subject_id",children:e.jsx(u,{placeholder:"Select a subject"})}),e.jsx(j,{children:D.map(s=>e.jsx(n,{value:s.subject_id.toString(),children:s.subject_id},s.subject_id))})]}),e.jsx(a,{children:"Subject Name"}),e.jsx(i,{id:"subject name",readOnly:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"teacher_id",children:"Subject ID"}),e.jsxs(o,{onValueChange:s=>{let l=y.find(r=>r.teacher_id===parseInt(s));document.getElementById("teacher name").value=l.teacher_name,t.setData("teacher_id",parseInt(s))},children:[e.jsx(h,{id:"teacher_id",children:e.jsx(u,{placeholder:"Select a teacher"})}),e.jsx(j,{children:y.map(s=>e.jsx(n,{value:s.teacher_id.toString(),children:s.teacher_id},s.teacher_id))})]}),e.jsx(a,{children:"Teacher Name"}),e.jsx(i,{id:"teacher name",readOnly:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"",children:"Class ID"}),e.jsxs(o,{onValueChange:s=>{t.setData("class_id",parseInt(s))},children:[e.jsx(h,{id:"class_id",children:e.jsx(u,{placeholder:"Select a teacher"})}),e.jsx(j,{children:P.map(s=>e.jsx(n,{value:s.class_id.toString(),children:s.class_id},s.class_id))})]})]}),e.jsx(b,{children:e.jsx(d,{onClick:s=>{s.preventDefault(),O(!1),E(!0)},disabled:t.processing,children:"Next"})})]})]})}),e.jsx(S,{open:$,onOpenChange:E,children:e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(C,{children:"Create Attendance"}),e.jsx(f,{children:"Please create attendance for the class session."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(o,{onValueChange:s=>c.setData("status",s),value:c.data.status||void 0,children:[e.jsx(h,{id:"status",children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(n,{value:"Present",children:"Present"}),e.jsx(n,{value:"Absent",children:"Absent"}),e.jsx(n,{value:"Late",children:"Late"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"remark",children:"Remark"}),e.jsx(i,{id:"remark",placeholder:"Enter remark",value:c.data.remarks,onChange:s=>c.setData("remarks",s.target.value),required:!0})]}),e.jsx(b,{children:e.jsx(d,{onClick:s=>{s.preventDefault(),E(!1),A(!0)},disabled:t.processing,children:"Next"})})]})]})}),e.jsx(S,{open:K,onOpenChange:A,children:e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(C,{children:"Select Student"}),e.jsx(f,{children:"Please select a student to proceed with creating attendance for the class session."})]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"student_id",children:"Student ID"}),e.jsxs(o,{onValueChange:s=>{let l=M.find(r=>r.student_id===parseInt(s));document.getElementById("student name").value=l.student_name,c.setData("student_id",parseInt(s))},children:[e.jsx(h,{id:"student_id",children:e.jsx(u,{placeholder:"Select a student"})}),e.jsx(j,{children:M.map(s=>e.jsx(n,{value:s.student_id.toString(),children:s.student_id},s.student_id))})]}),e.jsx(a,{children:"Student Name"}),e.jsx(i,{id:"student name",readOnly:!0})]}),e.jsx(b,{children:e.jsx(d,{type:"submit",disabled:t.processing,children:"Submit"})})]})]})}),e.jsx(S,{open:W,onOpenChange:T,children:e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(C,{children:"Edit Session"}),e.jsx(f,{children:"Update the session information."})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"session_date",children:"Session Date"}),e.jsx(i,{id:"session_date",type:"date",placeholder:"YYYY-MM-DD",value:t.data.session_date,onChange:s=>t.setData("session_date",s.target.value),required:!0}),t.errors.session_date&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.session_date}),e.jsx(a,{htmlFor:"start_time",children:"Start Time"}),e.jsx(i,{id:"start_time",type:"time",placeholder:"HH:MM:SS",value:t.data.start_time,onChange:s=>t.setData("start_time",s.target.value),required:!0}),t.errors.start_time&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.start_time}),e.jsx(a,{htmlFor:"end_time",children:"End Time"}),e.jsx(i,{id:"end_time",type:"time",placeholder:"HH:MM:SS",value:t.data.end_time,onChange:s=>t.setData("end_time",s.target.value),required:!0}),t.errors.end_time&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.end_time}),e.jsx(a,{htmlFor:"status",children:"Status"}),e.jsxs(o,{onValueChange:s=>t.setData("status",s),value:t.data.status||void 0,children:[e.jsx(h,{id:"status",children:e.jsx(u,{placeholder:"Select status"})}),e.jsxs(j,{children:[e.jsx(n,{value:"Active",children:"Active"}),e.jsx(n,{value:"Inactive",children:"Inactive"}),e.jsx(n,{value:"Cancelled",children:"Cancelled"}),e.jsx(n,{value:"Completed",children:"Completed"})]})]}),t.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:t.errors.status})]})}),e.jsx(b,{children:e.jsx(d,{onClick:s=>{s.preventDefault(),T(!1),F(!0)},disabled:t.processing,children:"Next"})})]})]})}),e.jsx(S,{open:G,onOpenChange:F,children:e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(C,{children:"Select Class Subject"}),e.jsx(f,{children:"Please select a class subject to proceed with creating a class session."})]}),e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"department_id",children:"Subject ID"}),e.jsxs(o,{onValueChange:s=>{let l=D.find(r=>r.subject_id===parseInt(s));document.getElementById("subject name").value=l.name,t.setData("subject_id",parseInt(s))},children:[e.jsx(h,{id:"subject_id",children:e.jsx(u,{placeholder:"Select a subject"})}),e.jsx(j,{children:D.map(s=>e.jsx(n,{value:s.subject_id.toString(),children:s.subject_id},s.subject_id))})]}),e.jsx(a,{children:"Subject Name"}),e.jsx(i,{id:"subject name",readOnly:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"teacher_id",children:"Subject ID"}),e.jsxs(o,{onValueChange:s=>{let l=y.find(r=>r.teacher_id===parseInt(s));document.getElementById("teacher name").value=l.teacher_name,t.setData("teacher_id",parseInt(s))},children:[e.jsx(h,{id:"teacher_id",children:e.jsx(u,{placeholder:"Select a teacher"})}),e.jsx(j,{children:y.map(s=>e.jsx(n,{value:s.teacher_id.toString(),children:s.teacher_id},s.teacher_id))})]}),e.jsx(a,{children:"Teacher Name"}),e.jsx(i,{id:"teacher name",readOnly:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"",children:"Class ID"}),e.jsxs(o,{onValueChange:s=>{t.setData("class_id",parseInt(s))},children:[e.jsx(h,{id:"class_id",children:e.jsx(u,{placeholder:"Select a teacher"})}),e.jsx(j,{children:P.map(s=>e.jsx(n,{value:s.class_id.toString(),children:s.class_id},s.class_id))})]})]}),e.jsx(b,{children:e.jsx(d,{type:"submit",disabled:t.processing,children:"Submit"})})]})]})}),e.jsx(Se,{open:J,onOpenChange:k,children:e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(Ce,{children:"Are you sure?"}),e.jsx(fe,{children:"This action cannot be undone. This will permanently delete the subject and remove it from our servers."})]}),e.jsxs(be,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(ye,{onClick:te,className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{Re as default};
